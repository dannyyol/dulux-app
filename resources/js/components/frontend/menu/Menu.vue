<template>
  <div
    class="page-products-listing page-products-listing-all plp-color-selected flSearchClick-processed"
  >
    <div id="zone-content" class="zone-content focus-outline">
      <div class="main-container container focus-outline">
        <!-- /#page-header -->
        <div class="row focus-outline">
          <section class="col-sm-12 focus-outline">
            <!--   -->
            <a id="main-content"></a>
            <div class="region region-content focus-outline">
              <div id="full-form-wrapper" class="focus-outline">
                <section
                  id="block-system-main"
                  class="block block-system block--system-main clearfix focus-outline"
                  role="navigation"
                >
                  <form
                    class="form-counter focus-outline"
                    action="https://www.dulux.com.sg/en/products/all?id=2239&amp;color-name=Crisp%20Linen%2061yy%2089/040&amp;color-rgb=F4F0E4&amp;fl-stickey=1&amp;color-id=1190594&amp;cccid="
                    method="post"
                    id="flourish-product-listing-filters-solr-form"
                    accept-charset="UTF-8"
                  >
                    <div class="focus-outline">
                      <button
                        style="display: none"
                        id="edit-filters-reset-link"
                        name="filters_reset_link"
                        value="Reset Filters"
                        type="button"
                        class="btn btn-default form-submit ajax-processed"
                        tabindex="22"
                      >
                        Reset Filters
                      </button>
                      <button
                        style="display: none"
                        id="edit-product-type-filters-reset-link"
                        name="product_type_filters_reset_link"
                        value="Reset Product Type Filters"
                        type="button"
                        class="btn btn-default form-submit ajax-processed"
                        tabindex="23"
                      >
                        Reset Product Type Filters
                      </button>
                      <button
                        style="display: none"
                        id="edit-room-type-filters-reset-link"
                        name="room_type_filters_reset_link"
                        value="Reset Room Type Filters"
                        type="button"
                        class="btn btn-default form-submit ajax-processed"
                        tabindex="24"
                      >
                        Reset Room Type Filters
                      </button>
                      <button
                        style="display: none"
                        id="edit-surface-usage-filters-reset-link"
                        name="surface_usage_filters_reset_link"
                        value="Reset Surface Usage Filters"
                        type="button"
                        class="btn btn-default form-submit ajax-processed"
                        tabindex="25"
                      >
                        Reset Surface Usage Filters
                      </button>
                      <button
                        style="display: none"
                        id="edit-finish-filters-reset-link"
                        name="finish_filters_reset_link"
                        value="Reset Finish Filters"
                        type="button"
                        class="btn btn-default form-submit ajax-processed"
                        tabindex="26"
                      >
                        Reset Finish Filters
                      </button>

                      <div
                        id="product-listing-filters-wrapper"
                        class="focus-outline"
                      >
                        <div class="row plp-color-bar-show">
                          <div class="col-sm-12">
                            <div class="clearfix">
                              <a
                                class="swatch-close vr-margin-top-4 right close-color"
                                data-close="#swatch-bar"
                                href="https://www.dulux.com.sg/en/products/all"
                                tabindex="27"
                              >
                                <svg class="icon icon-close">
                                  <use
                                    xmlns:xlink="http://www.w3.org/1999/xlink"
                                    xlink:href="/profiles/flourish/themes/custom/flourish_rem/images/svg/svgsprite/sprite.svg#icon-close"
                                  ></use>
                                </svg>
                              </a>
                            </div>
                            <div
                              id="swatch-bar"
                              class="swatch-bar squircle vr-margin-top-1 color-text"
                              data-rgb="F4F0E4"
                              style="
                                background-color: rgb(244, 240, 228);
                                color: rgb(102, 102, 102);
                                stroke: rgb(102, 102, 102);
                              "
                            >
                              <p class="h4 plp-color-name">
                                Crisp Linen 61yy 89/040
                              </p>
                              <a
                                class="inline-text-link pick-a-colour change-color color-text"
                                href="https://www.dulux.com.sg/en/colour-palettes"
                                data-rgb="F4F0E4"
                                tabindex="28"
                                style="
                                  color: rgb(102, 102, 102);
                                  stroke: rgb(102, 102, 102);
                                "
                              >
                                Change this colour
                                <svg class="icon icon-arrow-right">
                                  <use
                                    xmlns:xlink="http://www.w3.org/1999/xlink"
                                    xlink:href="/profiles/flourish/themes/custom/flourish_rem/images/svg/svgsprite/sprite.svg#icon-arrow-right"
                                  ></use>
                                </svg>
                              </a>
                            </div>
                          </div>
                        </div>
                        <div
                          class="product-listing-filters fl-equi-height-container vr-margin-top-7 focus-outline"
                        >
                          <div class="row focus-outline">
                            <div class="col-md-2">
                              <div
                                id="filter-wrapper-plp"
                                class="filter-wrapper filter-wrapper-plp"
                              >
                                <div class="title-section hidden-sm-up">
                                  <h2 class="text-center">Filters</h2>
                                </div>
                                <div class="title-section hidden-sm-down">
                                  <h2 class="h5">Filters</h2>
                                  <a
                                    href="javascript:void(0)"
                                    class="filter-reset inline-text-link primary btn-clear"
                                    tabindex="29"
                                    style="display: none"
                                    >Clear all</a
                                  >
                                </div>
                                <div class="clp-wrap collapse-wrap general">
                                  <div>
                                    <div class="jquery_accordion_wrapper">
                                      <div class="jquery_accordion_item">
                                        <div class="jquery_accordion_title">
                                          Project Type
                                        </div>
                                        <div class="jquery_accordion_content">
                                          <div
                                            class="card-body overflow-auto"
                                            style="
                                              background-color: rgba(
                                                204,
                                                204,
                                                204,
                                                0.144
                                              );
                                            "
                                          >
                                            <form action="#">
                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test1"
                                                  name="radio-group"
                                                  checked
                                                />
                                                <label for="test1">All</label>
                                              </p>
                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test2"
                                                  name="radio-group"
                                                />
                                                <label for="test2"
                                                  >Bathroom</label
                                                >
                                              </p>
                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test3"
                                                  name="radio-group"
                                                />
                                                <label for="test3"
                                                  >Bedroom</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test4"
                                                  name="radio-group"
                                                />
                                                <label for="test4"
                                                  >Dinning room</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test5"
                                                  name="radio-group"
                                                />
                                                <label for="test5"
                                                  >Hallway</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test6"
                                                  name="radio-group"
                                                />
                                                <label for="test6"
                                                  >Home Office</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test7"
                                                  name="radio-group"
                                                />
                                                <label for="test7"
                                                  >Kitchen</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test8"
                                                  name="radio-group"
                                                />
                                                <label for="test8"
                                                  >Kitchen</label
                                                >
                                              </p>
                                            </form>
                                          </div>
                                        </div>
                                      </div>
                                    </div>

                                    <div class="jquery_accordion_wrapper">
                                      <div class="jquery_accordion_item">
                                        <div class="jquery_accordion_title">
                                          Surface
                                        </div>
                                        <div class="jquery_accordion_content">
                                          <div
                                            class="card-body overflow-auto"
                                            style="
                                              background-color: rgba(
                                                204,
                                                204,
                                                204,
                                                0.144
                                              );
                                            "
                                          >
                                            <form action="#">
                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test1"
                                                  name="radio-group"
                                                  checked
                                                />
                                                <label for="test1">All</label>
                                              </p>
                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test2"
                                                  name="radio-group"
                                                />
                                                <label for="test2"
                                                  >Bathroom</label
                                                >
                                              </p>
                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test3"
                                                  name="radio-group"
                                                />
                                                <label for="test3"
                                                  >Bedroom</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test4"
                                                  name="radio-group"
                                                />
                                                <label for="test4"
                                                  >Dinning room</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test5"
                                                  name="radio-group"
                                                />
                                                <label for="test5"
                                                  >Hallway</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test6"
                                                  name="radio-group"
                                                />
                                                <label for="test6"
                                                  >Home Office</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test7"
                                                  name="radio-group"
                                                />
                                                <label for="test7"
                                                  >Kitchen</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test8"
                                                  name="radio-group"
                                                />
                                                <label for="test8"
                                                  >Kitchen</label
                                                >
                                              </p>
                                            </form>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="jquery_accordion_wrapper">
                                      <div class="jquery_accordion_item">
                                        <div class="jquery_accordion_title">
                                          Finish
                                        </div>
                                        <div class="jquery_accordion_content">
                                          <div
                                            class="card-body overflow-auto"
                                            style="
                                              background-color: rgba(
                                                204,
                                                204,
                                                204,
                                                0.144
                                              );
                                            "
                                          >
                                            <form action="#">
                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test1"
                                                  name="radio-group"
                                                  checked
                                                />
                                                <label for="test1">All</label>
                                              </p>
                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test2"
                                                  name="radio-group"
                                                />
                                                <label for="test2"
                                                  >Bathroom</label
                                                >
                                              </p>
                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test3"
                                                  name="radio-group"
                                                />
                                                <label for="test3"
                                                  >Bedroom</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test4"
                                                  name="radio-group"
                                                />
                                                <label for="test4"
                                                  >Dinning room</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test5"
                                                  name="radio-group"
                                                />
                                                <label for="test5"
                                                  >Hallway</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test6"
                                                  name="radio-group"
                                                />
                                                <label for="test6"
                                                  >Home Office</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test7"
                                                  name="radio-group"
                                                />
                                                <label for="test7"
                                                  >Kitchen</label
                                                >
                                              </p>

                                              <p>
                                                <input
                                                  type="radio"
                                                  id="test8"
                                                  name="radio-group"
                                                />
                                                <label for="test8"
                                                  >Kitchen</label
                                                >
                                              </p>
                                            </form>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <!-- collapse-wrap -->
                              </div>
                              <div class="results-bar">
                                <a
                                  href="javascript:void(0)"
                                  class="filter-reset filter-reset inline-text-link primary btn-clear"
                                  tabindex="73"
                                  style="display: none"
                                  >Clear all</a
                                >
                                <button
                                  id="filter_results_btn"
                                  class="bttn primary bttn-auto-width pull-right"
                                  tabindex="74"
                                >
                                  Show <span>10</span> results
                                </button>
                              </div>
                            </div>
                            <div
                              class="product-listing-markup-wrapper col-md-10 view-content focus-outline"
                              @wheel.prevent="wheel($event)"
                            >
                              <div
                                class="col-sm-12 focus-outline"
                                v-if="!loading"
                              >
                                <div style="">
                                  <a
                                    class="btn float-right border-1"
                                    style="
                                      border-radius: 0px !important;
                                      font-size: 14px;
                                      border-color: #ccc;
                                      position: sticky !important;
                                      top: 10px;
                                      z-index: 1099 !important;
                                    "
                                    data-toggle="modal"
                                    data-target="#centralModalSm2"
                                    ><i
                                      class="fa fa-shopping-cart"
                                      aria-hidden="true"
                                      style="font-size: 21px !important"
                                    ></i>
                                    Cart
                                    <span
                                      class="cart_count"
                                      style="
                                        background-color: #2fc48d;
                                        padding-top: 2px;
                                        position: absolute;
                                        top: -8px !important;
                                        width: 25px;
                                        height: 25px;
                                        border-radius: 12.5px;
                                        color: #fff;
                                      "
                                      >{{ cartQty() }}</span
                                    >
                                  </a>
                                  <h1
                                    class="h2 vr-margin-bottom-0 focus-outline"
                                  >
                                    Find the products for your project
                                  </h1>
                                </div>

                                <div
                                  class="product-listing-information focus-outline"
                                >
                                  <div
                                    class="product-amount vr-padding-vertical-4 focus-outline"
                                  >
                                    <span>10</span> Products found
                                  </div>
                                  <section class="filtering">
                                    <div class="filter-zone">
                                      <div
                                        class="icon-plus-text ipt-icon-settings right"
                                        style=""
                                      >
                                        Filters
                                        <svg class="icon icon-settings">
                                          <use
                                            xlink:href="/profiles/flourish/themes/custom/flourish_rem/images/svg/svgsprite/sprite.svg#icon-settings"
                                          ></use>
                                        </svg>
                                      </div>
                                      <span class="count-label totalInputCount"
                                        >0</span
                                      >
                                      <div class="clearfix"></div>
                                    </div>
                                  </section>
                                </div>
                                <div
                                  class="filter-section bar-desktop vr-padding-vertical-4"
                                >
                                  <div class="bar-title">My filters</div>
                                  <div
                                    id="filter-selections"
                                    class="filter-labels"
                                  ></div>
                                  <a
                                    href="javascript:void(0)"
                                    class="filter-reset inline-text-link primary btn-clear"
                                    tabindex="75"
                                    style="display: none"
                                    >Clear all</a
                                  >
                                </div>

                                <div class="onedomain-component">
                                  <div class="row">
                                    <div
                                      class="view view-product-listing-solr view-id-product_listing_solr view-display-id-page_6 view-product-Listing view-dom-id-dbee5394231560ecc1c715efb72377e4"
                                    >
                                      <div class="view-header">
                                        <p class="h1 fl-prod-page-header">
                                          10 Products found
                                        </p>
                                      </div>

                                      <div class="view-content">
                                        <div class="row vr-margin-top-7">
                                          <div
                                            class="col-xs-12 col-md-3"
                                            v-for="(
                                              product, index
                                            ) in local_products"
                                            :key="index"
                                          >
                                            <div class="product-card-container">
                                              <section
                                                class="product-card js-product-card"
                                              >
                                                <div
                                                  class="product-card__underlay"
                                                ></div>

                                                <span
                                                  id="75731"
                                                  class="scrap-book-add-product focus-outline product-card__button js-notify icon-heart js-toggle-class"
                                                  data-type="product"
                                                  data-categorytype="Paint"
                                                  data-globalid="4e35006f-b542-4ceb-8815-a40a00fa4db1"
                                                  data-colorid=""
                                                  data-colorcollection=""
                                                  data-colorname=""
                                                  data-tc-class="active"
                                                >
                                                  <span
                                                    class="icon-heart-empty"
                                                  >
                                                  </span>
                                                  <span
                                                    class="icon-heart-filled"
                                                  >
                                                    ></span
                                                  >
                                                </span>
                                                <a
                                                  class="product-card__link"
                                                  title="product.title"
                                                  tabindex="76"
                                                >
                                                  <article
                                                    class="product-card__content"
                                                  >
                                                    <p
                                                      class="product-card__title js-product-card-title"
                                                      style="height: 24px"
                                                    >
                                                      {{ product.product_name }}
                                                    </p>
                                                    <div
                                                      class="product-card__image-wrapper"
                                                    >
                                                      <div
                                                        class="product-card__image"
                                                      >
                                                        <img
                                                          :src="
                                                            '/assets/front/img/product/featured/' +
                                                            product.product_image
                                                          "
                                                          alt=""
                                                          srcset=""
                                                        />
                                                      </div>
                                                    </div>
                                                    <ul
                                                      class="icon-list product-card__features focus-outline"
                                                    >
                                                      <li class="focus-outline">
                                                        <span>
                                                          <img
                                                            src="/images/check-mark.png"
                                                            alt=""
                                                            srcset=""
                                                            width="15"
                                                          />
                                                        </span>
                                                        <span
                                                          class="focus-outline"
                                                        >
                                                          Paint HappyTM
                                                          Technology, "Truly
                                                          odour free"* when
                                                          freshly painted
                                                        </span>
                                                      </li>

                                                      <li>
                                                        <span>
                                                          <img
                                                            src="/images/check-mark.png"
                                                            alt=""
                                                            srcset=""
                                                            width="15"
                                                          />
                                                        </span>
                                                        <span>
                                                          Smooth matt finish
                                                        </span>
                                                      </li>

                                                      <li>
                                                        <span>
                                                          <img
                                                            src="/images/check-mark.png"
                                                            alt=""
                                                            srcset=""
                                                            width="15"
                                                          />
                                                        </span>
                                                        <span>
                                                          High Opacity
                                                        </span>
                                                      </li>
                                                    </ul>
                                                  </article>
                                                </a>
                                                <div
                                                  class="container product-card-bottom"
                                                  style=""
                                                >
                                                  <div class="row mb-2">
                                                    <div class="col-sm-6 mb-2">
                                                      <div class="">
                                                        <table>
                                                          <tr>
                                                            <td>
                                                              <button
                                                                class="mr-1 btn btn-lg btn-danger btn_"
                                                                style="
                                                                  width: 30px;
                                                                  height: 30px;
                                                                "
                                                                @click.prevent="
                                                                  decrementQty(
                                                                    product.product_id
                                                                  )
                                                                "
                                                              >
                                                                -
                                                              </button>
                                                            </td>
                                                            <td class="">
                                                              <input
                                                                type="text"
                                                                name=""
                                                                id=""
                                                                class="form-control mr-1"
                                                                :value="
                                                                  cart_qty.product_quantity
                                                                "
                                                                style="
                                                                  width: 35px;
                                                                  height: 30px;
                                                                  padding: 0px !important;
                                                                  text-align: center;
                                                                "
                                                              />
                                                            </td>
                                                            <td>
                                                              <button
                                                                class="btn btn-danger"
                                                                style="
                                                                  width: 30px;
                                                                  height: 30px;
                                                                "
                                                              >
                                                                +
                                                              </button>
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      </div>
                                                    </div>

                                                    <div
                                                      class="col-sm-6 d-flex justify-content-end"
                                                    >
                                                      <div class="form-goup">
                                                        <input
                                                          class="form-control price_input"
                                                          type="text"
                                                          name=""
                                                          :value="
                                                            '$' +
                                                            product.product_price
                                                          "
                                                          disabled
                                                        />
                                                      </div>
                                                    </div>
                                                    <!-- <form > -->

                                                      <div class="col-sm-6">
                                                        <div class="">
                                                          <table>
                                                            <tr>
                                                              <td>
                                                                <button type="button" @click="decrementVarianceQty(index)"
                                                                  class="mr-1 btn btn-lg btn-danger btn_qty_increment"
                                                                  style="
                                                                    width: 30px;
                                                                    height: 30px;
                                                                  "
                                                                >
                                                                  -
                                                                </button>
                                                              </td>
                                                              <td>
                                                                <input
                                                                  type="text"
                                                                  name=""
                                                                  id=""
                                                                  class="form-control mr-1"
                                                                  style="
                                                                    width: 35px;
                                                                    height: 30px;
                                                                    padding: 0px !important;
                                                                    text-align: center;
                                                                  "
                                                                  v-model="
                                                                    product.variation_qty
                                                                  "
                                                                />
                                                              </td>
                                                              <td>
                                                                <button
                                                                  type="button"
                                                                  class="btn btn-danger"
                                                                  style="
                                                                    width: 30px;
                                                                    height: 30px;
                                                                  "
                                                                  @click="
                                                                    incrementVarianceQty(
                                                                      index
                                                                    )
                                                                  "
                                                                >
                                                                  +
                                                                </button>
                                                              </td>
                                                            </tr>
                                                          </table>
                                                          <input
                                                                  type="hidden"
                                                                  name=""
                                                                  id=""
                                                                  class="form-control mr-1"
                                                                  style="
                                                                    width: 35px;
                                                                    height: 30px;
                                                                    padding: 0px !important;
                                                                    text-align: center;
                                                                  "
                                                                  v-model="
                                                                    product.product_price
                                                                  "
                                                                />
                                                        </div>
                                                      </div>
                                                    <!-- </form> -->
                                                    <div
                                                      class="col-sm-6 d-flex justify-content-end"
                                                    >

                                                      <div class="form-goup">
                                                        <select
                                                          class="form-control litre_dropdown p-0"
                                                          style=""
                                                          @change="addVariation(product.product_id, index)"
                                                          v-model="
                                                            form2
                                                              .productVariations
                                                              .name[index]
                                                          "
                                                        >
                                                          <option value="0">
                                                            Litres
                                                          </option>
                                                          <option
                                                            v-for="(
                                                              variation, index
                                                            ) in JSON.parse(
                                                              product.product_variation
                                                            )"
                                                            :key="index"
                                                            :selected="
                                                              product.name ==
                                                              '1 Litre'
                                                            "
                                                          >
                                                            {{ variation.name }}
                                                          </option>
                                                        </select>
                                                      </div>


                                                    </div>
                                                  </div>

                                                  <div class="col-sm-12">
                                                    <a
                                                      @click="
                                                        showAddOn(
                                                          product.product_id,
                                                          product
                                                        )
                                                      "
                                                      href=""
                                                      class="btn mb-2 btn-lg btn-add-cart btn btn-success add_to_cart_button"
                                                      data-toggle="modal"
                                                      data-target="#add-on-modal"
                                                      >Add On
                                                    </a>
                                                  </div>

                                                  <div class="col-sm-12">
                                                    <a
                                                      href=""
                                                      class="btn btn-success mb-2 btn-add-cart btn-lg add_to_cart_button"
                                                      data-toggle="modal"
                                                      data-target="#centralModalSm"
                                                      >More info
                                                    </a>
                                                  </div>

                                                  <div class="col-sm-12">
                                                    <a
                                                      class="btn-add-cart btn btn-success btn-lg add_to_cart_button"
                                                      data-toggle="modal"
                                                      data-target="#centralModalSm2"
                                                    >
                                                      <span
                                                        class="d-block"
                                                        @click.prevent="
                                                          addToCart(
                                                            product,
                                                            product.product_id,
                                                            $event
                                                          )
                                                        "
                                                        >Add to Cart</span
                                                      >
                                                    </a>
                                                    <div
                                                      class="buybox"
                                                      v-if="currentProduct"
                                                      :style="
                                                        bgcss(
                                                          currentProduct.feature_image
                                                        )
                                                      "
                                                    ></div>
                                                    <!-- {{ currentProduct }} -->
                                                  </div>
                                                </div>
                                              </section>
                                              
                                              <!-- cart modal -->
                                              <CartModal/>
                                              <!--  -->
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div
                                v-else
                                class=""
                                style="
                                  margin: 0;
                                  position: fixed;
                                  top: 50%;
                                  left: 50%;
                                  -ms-transform: translate(-50%, -50%);
                                  transform: translate(-50%, -50%);
                                "
                              >
                                <div
                                  class="spinner-border"
                                  style="width: 4rem; height: 4rem"
                                  role="status"
                                >
                                  <span class="sr-only">Loading...</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <input
                        type="hidden"
                        name="form_build_id"
                        value="form-AxWHMqpphH8baegmOgMNlss6JFPxe1xLU3oFp9tAEoo"
                        tabindex="97"
                      />
                      <input
                        type="hidden"
                        name="form_id"
                        value="flourish_product_listing_filters_solr_form"
                        tabindex="98"
                      />
                    </div>
                  </form>
                </section>
              </div>
            </div>
          </section>
        </div>
      </div>

      <!-- Button trigger modal -->

      <!-- Descitption modal-->
      <div
        class="modal fade"
        id="centralModalSm"
        tabindex="-1"
        role="dialog"
        aria-labelledby="myModalLabel"
        aria-hidden="true"
      >
        <!-- Change class .modal-sm to change the size of the modal -->
        <div class="modal-dialog modal-xl" role="document">
          <div class="modal-content">
            <div class="modal-body justify-content-center">
              <div id="tabs">
                <ul class="nav nav-tabs tabs-heading" role="tablist">
                  <li class="nav-item" style="border-left: none !important">
                    <a
                      class="nav-link active"
                      data-index="0"
                      data-toggle="tab"
                      href="#tab-0"
                      role="tab"
                      >Key Informations</a
                    >
                  </li>
                  <li class="nav-item">
                    <a
                      class="nav-link"
                      data-index="1"
                      data-toggle="tab"
                      href="#tab-1"
                      role="tab"
                      >Product Features</a
                    >
                  </li>
                  <li class="nav-item">
                    <a
                      class="nav-link"
                      data-index="2"
                      data-toggle="tab"
                      href="#tab-2"
                      role="tab"
                      >Documentation</a
                    >
                  </li>
                  <li class="nav-item">
                    <a
                      class="nav-link"
                      data-index="3"
                      data-toggle="tab"
                      href="#tab-3"
                      role="tab"
                      >Tips & Advice</a
                    >
                  </li>
                  <li class="nav-item">
                    <a
                      class="nav-link calculator_button"
                      data-index="4"
                      data-toggle="tab"
                      href="#tab-4"
                      role="tab"
                      >Calculator</a
                    >
                  </li>
                </ul>
              </div>
              <div class="tab-content h-100">
                <div
                  class="tab-pane fade tab-style ml-3 mt-3 active show"
                  id="tab-0"
                  role="tabpanel"
                >
                  <div class="container-fluid">
                    <div class="row">
                      <div class="col-md-4">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="left-color-cart" style=""></div>
                            <div class="mt-3">
                              <div class="float-left">
                                <img
                                  src="/images/paint-2.png"
                                  alt=""
                                  srcset=""
                                  class="modal-before-cart-image"
                                />
                              </div>
                              <div
                                class="float-right mt-2"
                                style="width: 180px !important"
                              >
                                <h2>Dulux Pentalie</h2>
                                <p>
                                  <small>
                                    Hide imperfections on walls
                                    beautifully</small
                                  >
                                </p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="col-md-8">
                        <div
                          class="key-info-desc overflow-auto"
                          style="height: 400px !important"
                        >
                          <h1>Tips & Advice</h1>
                          <p><b> Preparing the Surfaces</b></p>
                          <p>
                            Surfaces must be sound, clean, dry and free from all
                            defective or poorly adhering material, dirt, grease
                            or wax and be thoroughly rubbed down using a
                            suitable abrasive paper and dusted off. It is
                            important to ensure that your wall is smooth and
                            even to obtain the best results from Dulux PureAir.
                            If after thorough preparation, surfaces remain
                            powdery, seal with one coat of an appropriate
                            Primer.
                          </p>

                          <p><b> Cleaning </b></p>
                          Clean all equipment with clean water immediately after
                          use.

                          <p><b> Storing</b></p>
                          <p>
                            Observe the label precautions. Store in a cool, dry,
                            well ventilated place away from sources of heat,
                            ignition and direct sunlight. No smoking. Prevent
                            unauthorised access. Containers which are opened
                            should be properly resealed and kept upright to
                            prevent leakage. Do not use or store any paint
                            container by hanging on a hook.
                          </p>
                        </div>
                      </div>
                      <div
                        class="col-md-12 row d-flex justify-content-end mt-5"
                      >
                        <button
                          type="button"
                          class="btn btn-sm btn-primary custom_button mr-3"
                        >
                          Send Brochure
                        </button>
                        <!-- <div class="form-group"> -->
                        <select
                          id="my-select"
                          class="form-control cart-info-select-button mr-3"
                          name=""
                        >
                          <option>1 Litres</option>
                        </select>
                        <!-- </div> -->
                        <button
                          type="button"
                          class="btn btn-sm btn-success custom_button mr-3"
                          data-dismiss="modal"
                          aria-label="Close"
                          data-toggle="modal"
                          data-target="#centralModalSm2"
                        >
                          Add to Cart
                        </button>
                        <button
                          class="btn btn-danger custom_button text-white"
                          type="button"
                          data-dismiss="modal"
                          aria-label="Close"
                        >
                          Cancel
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="tab-pane fade tab-style ml-3 mt-3"
                  id="tab-1"
                  role="tabpanel"
                >
                  Paint HappyTM Technology, "Truly odour free"* when freshly
                  paintedAirfreshTM Technology, keeps air fresh after
                  paintingWashable & easy cleaningMould & fungus
                  resistance/Anti-bacterialColourguard technology, keeps colours
                  looking fresh longerSmooth luxurious finishEnvironmentally
                  preferred paint (Singapore GreenLabel certified)
                </div>
                <div
                  class="tab-pane fade tab-style ml-3 mt-3"
                  id="tab-2"
                  role="tabpanel"
                >
                  2
                </div>
                <div
                  class="tab-pane fade tab-style ml-3 mt-3"
                  id="tab-3"
                  role="tabpanel"
                >
                  3
                </div>
                <div
                  class="tab-pane fade tab-style ml-3 mt-3"
                  id="tab-4"
                  role="tabpanel"
                >
                  <div class="container calculator-container mx-auto">
                    <!-- <div class=""> -->
                    <div class="calculator-box h-100">
                      <div class="container">
                        <div class="row">
                          <div
                            class="col-md-6 mt-5"
                            style="margin: auto; text-align: center !important"
                          >
                            <p class="magintop-2">Do you know the Area ?</p>
                            <button class="btn no_button">No</button>
                            <button class="btn yes_button">Yes</button>
                            <p class="magintop-2">
                              Enter the height and the length of the surface you
                              want to paint
                            </p>
                          </div>
                          <div class="col-md-6 calculator-">
                            <p class="">How much paint do I need ?</p>
                            <div class="form-group mt-5 calculator-input">
                              <small id="helpId" class="form-text text-muted"
                                ><b>Height</b> in metres</small
                              >
                              <input
                                type="text"
                                class="form-control"
                                name=""
                                id=""
                                aria-describedby="helpId"
                                placeholder="Enter Height"
                              />
                            </div>
                            <div class="form-group mt-5 calculator-input">
                              <small id="helpId" class="form-text text-muted"
                                ><b>Length</b> in metres</small
                              >
                              <input
                                type="text"
                                class="form-control"
                                name=""
                                id=""
                                aria-describedby="helpId"
                                placeholder="Enter Length"
                              />
                            </div>
                          </div>

                          <div class="col-md-12 d-flex justify-content-center">
                            <!-- </div> -->
                            <button
                              type="button"
                              class="btn btn-sm btn-success custom_button mr-3"
                              data-dismiss="modal"
                              aria-label="Close"
                              data-toggle="modal"
                              data-target="#centralModalSm2"
                            >
                              Calculator
                            </button>
                            <button
                              class="btn btn-danger custom_button text-white"
                              type="button"
                              data-dismiss="modal"
                              aria-label="Close"
                            >
                              Cancel
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- </div> -->
                  </div>
                </div>
                <div
                  class="tab-pane fade tab-style ml-3 mt-3"
                  id="tab-5"
                  role="tabpanel"
                >
                  5
                </div>
              </div>
              <br />
            </div>
            <!-- <div class="modal-footer">
                    </div> -->
          </div>
        </div>
      </div>
      <!-- description Modal -->

      <!-- details here -->
      <OrderDetails :cartsTotal="cartSubtotal" />
      <!-- Cart Modal  -->

      <div>
        <!-- <b-button id="show-btn" @click="cartModal('bv-modal-cart')"
          >Open Modal</b-button
        > -->

        <!-- <transition class="animate__animated animate__fadeInBottomRight"> -->
        <transition
          name="custom-classes-transition"
          enter-active-class="animated fadeInBottomLeft"
          leave-active-class="animated fadeInBottomRight"
        >
          <b-modal
            ref="myModalRef"
            centered
            size="lg"
            id="bv-modal-cart"
            hide-footer
            hide-header
            @shown="shown"
            class="hidden"
            @cancel="hidden"
          >
            <div class="modal-header cart_modal-header" style="">
              <h3 class="modal-title w-100 my-auto" id="myModalLabel">
                Items in Cart
              </h3>
              <button
                class="btn btn-danger custom_button cart_close_button text-white"
                type="button"
                @click="$bvModal.hide('bv-modal-cart')"
              >
                Close
              </button>
            </div>
            <div v-if="!loading">
              <div class="modal-body">
                <div
                  class="row"
                  v-for="(cart, index) in carts"
                  :key="index"
                  style="margin-bottom: 10px !important"
                >
                  <div class="col-md-2 bg-">
                    <div class="card cart_image_card">
                      <img
                        :src="
                          '/assets/front/img/product/featured/' +
                          cart.feature_image
                        "
                        alt="menu"
                      />
                    </div>
                  </div>
                  <div class="col-md-2">
                    <p v-text="cart.product_name.title"></p>
                  </div>

                  <div
                    class="col-md-3 minus-qty-plus d-flex justify-content-center my-auto"
                  >
                    <div class="row mx-auto">
                      <a
                        class="btn cart-sm-button text-white"
                        @click.prevent="decrementQty(cart.id)"
                      >
                        -
                      </a>
                      <input
                        type="text"
                        class="form-control ml-1 mr-1 input-qty-value"
                        name=""
                        id=""
                        aria-describedby="helpId"
                        placeholder=""
                        :value="cart.product_quantity"
                        style=""
                      />
                      <a
                        class="btn cart-sm-button text-white"
                        @click.prevent="incrementQty(cart.id)"
                      >
                        +
                      </a>
                    </div>
                  </div>
                  <div class="col-md-2 text-white my-auto">
                    <a class="btn change-color-button">
                      <i class="fa fa-exchange" aria-hidden="true"></i>
                      Change
                    </a>
                  </div>

                  <div class="col-md-2 my-auto">
                    <a
                      class="btn border-1 cart_product_price"
                      v-text="'$' + cart.product_price"
                    ></a>
                  </div>

                  <div class="col-md-1 text-white bg- my-auto">
                    <a
                      @click="removeCartItem(cart.id)"
                      name=""
                      id=""
                      style="margin-right: 20px !important"
                      class=""
                      role="button"
                    >
                      <i
                        class="fa cart_delete_button fa-trash-o"
                        aria-hidden="true"
                      ></i>
                    </a>
                  </div>
                </div>

                <div class="row">
                  <div
                    class="col-md-10 d-flex justify-content-end"
                    style="float: right !important"
                  >
                    <p style="font-size: 18px !important">
                      <b style=""> Total Price:</b> ${{ cartSubtotal() }}
                    </p>
                  </div>
                </div>
              </div>
              <div class="modal-footer border-0">
                <button
                  type="button"
                  class="btn btn-sm custom_button clear-button"
                  @click.prevent="clearCartItems()"
                >
                  Clear
                </button>
                <button
                  type="button"
                  class="btn btn-sm custom_button checkout-button"
                  data-dismiss="modal"
                  aria-label="Close"
                  data-toggle="modal"
                  data-target="#centralModalSm3"
                >
                  Checkout
                </button>
              </div>
            </div>
            <div v-else>
              <p align="center">Loading...</p>
            </div>

            <!-- </template> -->
            <!-- <b-button class="mt-3" block @click="$bvModal.hide('bv-modal-cart')">Close Me</b-button> -->
          </b-modal>
        </transition>
      </div>
      <!-- end cart Modal-->

      <!-- Add on Modal -->
      <!-- Modal -->
      <div
        class="modal animate__animated animate__fadeInBottomRight fade"
        id="add-on-modal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="add-on-modal"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id="exampleModalLongTitle">
                <b>{{
                  product_name.title + " ($" + product_name.current_price + ")"
                }}</b>
              </h4>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>

            <form
              @submit.prevent="addAddOn(product_name.id, index)"
              method="post"
            >
              <div class="modal-body">
                <div v-if="productAddons">
                  <div v-for="(addon, index) in productAddons" :key="index">
                    <div class="container">
                      <div class="row">
                        <div class="col-md-5">
                          <div class="form-check">
                            <div>
                              <input
                                @click="boxCheck(addon, index)"
                                class="form-check-input"
                                type="checkbox"
                                :true-value="addon.name"
                                :false-value="null"
                                :id="'defaultCheck1' + index"
                                v-model="form.productAddons.name[index]"
                              />
                              <label
                                class="form-check-label"
                                :for="'defaultCheck1' + index"
                                style="font-size: 14px; font-weight: 500"
                              >
                                {{ addon.name }}
                              </label>
                            </div>
                          </div>
                        </div>

                        <div class="col-md-4">
                          <table>
                            <tr>
                              <td>
                                <button
                                  type="button"
                                  class="mr-1 btn btn-lg btn-danger btn_qty_increment"
                                  style="
                                    width: 30px;
                                    font-size: 14px;
                                    height: 30px;
                                  "
                                  @click="decrementAddOnQty(addon.name)"
                                  :disabled="
                                    form.productAddons.name[index] == '' ||
                                    form.productAddons.name[index] == null
                                  "
                                >
                                  -
                                </button>
                              </td>
                              <td>
                                <input
                                  type="text"
                                  name=""
                                  id=""
                                  class="form-control mr-1"
                                  style="
                                    width: 30px;
                                    height: 30px !important;
                                    padding: 0px !important;
                                    font-size: 14px;
                                    text-align: center;
                                  "
                                  v-model="addon.qty"
                                  :disabled="
                                    form.productAddons.name[index] == '' ||
                                    form.productAddons.name[index] == null
                                  "
                                  required
                                />
                              </td>
                              <td>
                                <button
                                  type="button"
                                  class="btn btn-danger btn_qty_increment"
                                  style="
                                    width: 30px;
                                    font-size: 14px;
                                    height: 30px;
                                  "
                                  @click="incrementAddOnQty(addon.name)"
                                  :disabled="
                                    form.productAddons.name[index] == '' ||
                                    form.productAddons.name[index] == null
                                  "
                                >
                                  +
                                </button>
                              </td>
                            </tr>
                          </table>
                        </div>

                        <div class="col-md-3">
                          <div class="form-goup">
                            <input
                              class="form-control price_input"
                              style="
                                background-color: #fff !important;
                                font-size: 14px !important;
                              "
                              type="text"
                              name=""
                              v-model="addon.price"
                              disabled
                            />
                            <!-- {{ currentProduct.id }} -->
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div v-else>
                  <div class="row">
                    <div
                      class="col-md-12"
                      style="text-align: center; margin: auto"
                    >
                      <h4 class="">No Addon Available for this Product</h4>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-lg btn-secondary"
                  data-dismiss="modal"
                >
                  Close
                </button>
                <button type="submit" class="btn btn-lg btn_save">
                  Save changes
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <!-- edn add on modal -->
    </div>
  </div>
</template>


<style >
.cart-modal-header {
  background-color: red !important;
}
</style>

<script>
//

import "../Accordion"
import $ from "jquery";
import { TweenMax, Power1 } from "gsap";
// import BaseTimer from "../frontend/BaseTimer";
import BaseTimer from "../BaseTimer"
import OrderDetails from "../modals/OrderDetails";
import CartModal from "../modals/cart/CartModal";

const TEN_MINUTES = 5;
export default {
  components: {
    BaseTimer,
    OrderDetails,
    CartModal
  },
  data() {
    return {
      checkboxes: false,
      loading: true,
      form: {
        productAddons: {
          name: [],
          qty: [],
          price: [],
        },
      },

      form2: {
        productVariations: {
          name: [],
          qty: [],
          price: [],
        },
      },
      cartQuantity: "",
      products: [],
      local_products: [],
      product: null,
      variations: [],
      categories: [],
      carts: [],
      cart_qty: [],
      loading: true,
      disabledDecrement: "disabled",
      disableQty: false,
      currentProduct: null,
      currentCart: null,
      currentAddon: null,
      currentVariance: null,
      productAddons: "{}",
      product_name: [],
      timer: TEN_MINUTES,
      modalShow: true,
    };
  },
  filters: {
    minutesAndSeconds(value) {
      var minutes = Math.floor(parseInt(value, 10) / 60);
      var seconds = parseInt(value, 10) - minutes * 60;
      return `${seconds}`;
    },
  },
  methods: {

    addVariation(id, index) {
      axios
        .post("/api/variation/" + id, this.form2.productVariations)
        .then((response) => {
          if (response.data["status_code"] == "AC") {
            this.errorMessage(response.data["message"]);
          } else if (response.data["status_code"] == "AB") {
            this.errorMessage(response.data["message"]);
          } else {
            this.form2.productVariations.name[index] = null;
            this.form2.productVariations.qty[index] = null;
            this.form2.productVariations.price[index] = null;

            toast.fire({
              icon: "success",
              title: "Cart successfully added",
            });
          }
        })
        .catch((error) => {
          swal.fire({
            position: "center",
            icon: "error",
            title: "Error Adding cart",
            showConfirmButton: true,
            timer: 2500,
          });
        });
    },

    decrementVarianceQty(index) {
      this.form2.productVariations.qty[index] = --this.local_products[index].variation_qty;
      this.form2.productVariations.price[index] = this.local_products[index].product_price * this.form2.productVariations.qty[index] ;

  },

    incrementVarianceQty(index) {
      this.form2.productVariations.qty[index] = ++this.local_products[index].variation_qty;
      this.form2.productVariations.price[index] = this.local_products[index].product_price * this.form2.productVariations.qty[index]

    },

    productVariation(product) {
      axios
        .get("/api/product/" + product.id)
        .then((response) => {
          // this.product = response.data;
          this.variations = JSON.parse(response.data.variations);
        })
        .catch((error) => {});
    },

    // productDetail(product) {
    //   axios
    //     .get("/api/product/" + product.id)
    //     .then((response) => {
    //       // this.product = response.data;
    //       this.variations = JSON.parse(response.data.variations);
    //     })
    //     .catch((error) => {});
    // },
    boxCheck(addon, index) {
      // this.currentAddon.forEach((addon, index) => {
      if (this.form.productAddons.name[index] == null) {
        // alert(this.form.productAddons.name[index])
        this.form.productAddons.qty[index] = addon.qty;
        this.form.productAddons.price[index] = addon.price;
      } else {
        this.form.productAddons.qty[index] = null;
        this.form.productAddons.price[index] = null;
      }
    },
    addOnSubtotal(name) {
      let sum = 0;
      this.currentAddon.forEach((addon, index) => {
        this.form.productAddons.price[index] = addon.price;
        sum +=
          parseFloat(this.form.productAddons.qty[index]) *
          parseFloat(this.form.productAddons.price[index]);

        // this.form.productAddons.price[index] = sum

        // $total += $addon_qty * $addon->price;
      });
      return sum;
    },

    incrementAddOnQty(name) {
      // this.form.productAddons =[]
      this.currentAddon.forEach((addon, index) => {
        if (addon.name == name) {
          this.form.productAddons.qty[index] = addon.qty;
          this.form.productAddons.qty[index] = ++addon.qty;
          this.form.productAddons.price[index] = addon.price;
        }
      });
      // alert(countit)
    },
    errorMessage(message) {
      swal.fire({
        position: "center",
        icon: "error",
        title: message,
        showConfirmButton: true,
        timer: 2500,
      });
    },

    decrementAddOnQty(name) {
      // this.form.productAddons =[]
      this.currentAddon.forEach((addon, index) => {
        if (addon.name == name) {
          this.form.productAddons.qty[index] = addon.qty;
          if (this.form.productAddons.qty[index] > 0) {
            this.form.productAddons.qty[index] = --addon.qty;
            this.form.productAddons.price[index] = addon.price;
          }
        }
      });
      // alert(countit)
    },
    addAddOn(id, index) {
      axios
        .post("/api/addon/" + id, this.form)
        .then((response) => {
          if (response.data["status_code"] == "AC") {
            this.errorMessage(response.data["message"]);
          } else if (response.data["status_code"] == "AB") {
            this.errorMessage(response.data["message"]);
          } else {
            this.form.productAddons.name[index] = null;
            this.form.productAddons.qty[index] = null;
            this.form.productAddons.price[index] = null;

            toast.fire({
              icon: "success",
              title: "Cart successfully added",
            });
          }
        })
        .catch((error) => {
          swal.fire({
            position: "center",
            icon: "error",
            title: "Error Adding cart",
            showConfirmButton: true,
            timer: 2500,
          });
        });


      this.startTimer();
    },

    // cartItemQty() {
    //     axios.get("/api/cart-lists/")
    //         .then(({ data }) => (this.cart_qty = data.product_quantity))
    //         .catch((error) => {
    //     });
    // },

    cartItemQty(id) {
      axios
        .get("/api/cart/" + id)
        .then(({ data }) => (this.cart_qty = data))
        .catch((error) => {});
    },
    modalClose() {
      this.modalShow == false;
    },
    startTimer() {
      this.timer = TEN_MINUTES;
    },
    showAddOn(id, product) {
      axios
        .get("/api/product/" + id)
        // .then(({ data }) => (this.productAddons = JSON.parse(data.addons)))
        .then((response) => {
          this.productAddons = JSON.parse(response.data.addons);
          this.currentAddon = this.productAddons;
          this.currentProduct = product;

          this.currentAddon.forEach((addon, index) => {
            // if(addon.name==name){
            this.form.productAddons.qty[index] = null;
            this.form.productAddons.name[index] = null;
            this.form.productAddons.price[index] = null;
          });

          //
          // for (const assessment of this.currentAddon) {
          //   this.form.productAddons.name.push(assessment.name);
          //   this.form.productAddons.qty.push(assessment.qty);
          // }
        })
        .catch((error) => {});
      this.showProductName(id);
    },

    showProductName(id) {
      axios
        .get("/api/product/" + id)
        .then(({ data }) => (this.product_name = data))
        .catch((error) => {});
    },
    shown: function () {
      setTimeout(() => {
        console.log("test");
        let modal = document.getElementById("bv-modal-cart");
        modal.parentElement.parentElement.classList.remove("hidden");
        modal.classList.add("animate__fadeInBottomRight");
        modal.classList.add("animate__animated");
      }, 1000);
    },
    hidden: function (evt) {
      let modal = document.getElementById("modal1");
      evt.preventDefault();
      modal.classList.add("animate__fadeInBottomRight");
      // modal.classList.add('animate__animated');
      setTimeout(() => {
        this.$refs.myModalRef.hide();
        // modal.parentElement.parentElement.classList.add('hidden');
        console.log("test");
      }, 1000);
    },
    cartModal(id) {
      this.$bvModal.show("bv-modal-cart");
    },
    bgcss(url) {
      return {
        "background-image":
          "url(/assets/front/img/product/featured/" + url + ")",
        "background-size": "cover",
        "background-position": "center center",
      };
    },
    wheel(evt) {
      console.log(evt.deltaY);
      TweenMax.to(".cards", 0.8, {
        left: "+=" + evt.deltaY * 2 + "px",
      });
    },
    // modalClose(id) {
    //   this.$bvModal.hide(id);
    // },
    listCategories() {
      axios
        .get("/api/category-lists/")
        .then(({ data }) => (this.categories = data))
        .catch((error) => {});
    },
    listProducts() {
      axios
        .get("/api/products-lists/")
        .then((response) => {
          // JSON responses are automatically parsed.
          this.products = response.data;
          this.loading = false;
          this.products.forEach((p) => {
            this.local_products.push({
              product_id: p.id,
              product_name: p.title,
              product_image: p.feature_image,
              product_price: p.current_price,
              product_variation: p.variations,
              variation_qty: 1,
            });

            // this.cartItemQty(p.id)
          });

          // this.products.forEach(p)
        })
        .catch((error) => {
          this.loading = true;
        });
    },
    accordion() {
      $(".jquery_accordion_title").click(function () {
        $(this)
          .closest(".jquery_accordion_item")
          .siblings()
          .removeClass("active")
          .find(".jquery_accordion_content")
          .slideUp(400);
        $(this)
          .closest(".jquery_accordion_item")
          .toggleClass("active")
          .find(".jquery_accordion_content")
          .slideToggle(400);
        return false;
      });
    },
    cartQty() {
      let sum = 0;
      for (let i = 0; i < this.carts.length; i++) {
        this.cartQuantity = sum += parseFloat(this.carts[i].product_quantity);
        console.log(i++);
      }
      return sum;
    },
    cartSubtotal() {
      let sum = 0;
      for (let i = 0; i < this.carts.length; i++) {
        sum +=
          parseFloat(this.carts[i].product_quantity) *
          parseFloat(this.carts[i].product_price);
      }
      return sum;
    },

    cartQty() {
      let sum = 0;
      for (let i = 0; i < this.carts.length; i++) {
        sum += parseFloat(this.carts[i].product_quantity);
      }
      return sum;
    },

    isEmpty(obj) {
      for (var cart in carts) {
        if (carts.hasOwnProperty(cart)) {
          return false;
        }
      }
      return JSON.stringify(carts) === JSON.stringify({});
    },
    disabledDecrementButton() {
      if (!this.carts.product_quantity >= 2) {
        return this.disabledDecrementButton;
      }
    },
    addToCart(product, id, evt) {
      // alert(product.feature_image)
      axios
        .post("/api/add-to-cart/" + id)
        .then((response) => {
          console.log(response);
          this.loading = false;
          this.cartItemQty(id);
          // console.log(showAddOn(id));

          // animation
          this.currentProduct = product;
          this.$nextTick(() => {
            TweenMax.from(".buybox", 0.8, {
              left: $(evt.target).offset().left,
              top: $(evt.target).offset().top,
              opacity: 1,
              ease: Power1.easeIn,
            });
            setTimeout(() => {
              // this.cart.push(product)
            }, 800);
          });
          // animation end
          Fire.$emit("AfterCreated");
        })
        .catch((error) => {});

      this.startTimer();
    },

    cartProducts() {
      axios
        .get("/api/cart-lists/")
        .then((response) => {
          this.carts = response.data;
          this.currentCart = response.data;
        })
        .catch((error) => {});

    },
    incrementQty(id) {
      axios
        .get("/api/increment-cart/" + id)
        .then(() => {
          Fire.$emit("AfterCreated");
        })
        .catch();
    },

    decrementQty(id) {
      axios
        .get("/api/decrement-cart/" + id)
        .then(() => {
          Fire.$emit("AfterCreated");
        })
        .catch();
    },

    removeCartItem(id) {
      axios
        .get("/api/remove-cart/" + id)
        .then(() => {
          Fire.$emit("AfterCreated");
        })
        .catch();
    },
    clearCartItems() {
      axios
        .post("/api/clear-cart/")
        .then(() => {
          Fire.$emit("AfterCreated");
        })
        .catch();
    },
  },
  watch: {
    cart() {
      TweenMax.from(".cart_count", 0.3, {
        scale: 3,
      });
    },
  },

  computed: {
    isDisabled(addon) {
      return !this.disableQty;
    },
  },
  mounted() {
    // this.cartItemQty()
    this.cartQty();
    this.listProducts();
    console.log(this.currentProduct);
    this.listCategories();
    Fire.$on("AfterCreated", () => {
      this.loading = false;
      this.cartProducts();
    });
    this.accordion();

    // count down modal
    // setInterval(() => {
    //     this.timer -= 1
    //     if(this.timer == 0){
    //         $("#centralModalSm2").modal('hide');
    //     }
    //     }, 1000)
  },
};
</script>




<style>
.swal2-container {
  zoom: 1.2;
}

.swal2-popup {
  font-size: 1.3rem !important;
}
.hidden {
  display: none;
}
/* Simple Accordion jQuery */
.jquery_accordion_item {
  display: inline-block;
  width: 100%;
  border-bottom: 1px solid #ccc;
}
.jquery_accordion_title {
  font-size: 14px;
  color: #333;
  display: block;
  line-height: 140%;
  padding: 15px 40px 15px 20px;
  font-weight: bold;
  position: relative;
  cursor: pointer;
}
.jquery_accordion_title:after {
  content: "";
  width: 0;
  height: 0;
  display: inline-block;
  position: absolute;
  right: 15px;
  top: 50%;
  border: 6px solid transparent;
  border-top-color: #333;
  transition: border 400ms, margin 400ms;
  margin-top: -3px; /* half of border value */
}
.jquery_accordion_item.active .jquery_accordion_title:after {
  border-color: transparent;
  border-bottom-color: #333;
  margin-top: -9px; /* fixing arrow position */
}
/* .jquery_accordion_content {
	padding: 8px;
	display: none;
	color: #333;
}
.jquery_accordion_content > *:first-child {
	margin-top: 0;
}  */
.hidden {
  /* display: none; */
}

.bs-example {
  margin: 20px !important;
}
.accordion .fa {
  margin-right: 2rem !important;
}
</style>